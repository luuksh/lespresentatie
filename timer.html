<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Klas Timer</title>
  <style>
    :root {
      --bg-1: #081226;
      --bg-2: #0e1c34;
      --panel: #0f223f;
      --panel-soft: #132b4f;
      --line: rgba(183, 209, 246, 0.24);
      --text: #e8f1ff;
      --muted: #aac0e3;
      --accent: #4ec5ff;
      --accent-2: #2999ff;
      --ok: #39d98a;
      --warn: #ffb954;
      --danger: #ff6e6e;
      --ring-track: rgba(180, 209, 255, 0.2);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body {
      margin: 0;
      padding: 10px;
      background:
        radial-gradient(560px 280px at 20% 0%, #14335f 0%, transparent 65%),
        linear-gradient(180deg, var(--bg-2) 0%, var(--bg-1) 100%);
      color: var(--text);
      font: 14px/1.35 "Avenir Next", "Segoe UI", "Helvetica Neue", Arial, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .timer {
      width: min(320px, 100%);
      background: linear-gradient(180deg, rgba(18, 40, 73, 0.96), rgba(11, 27, 51, 0.96));
      border: 1px solid var(--line);
      border-radius: 16px;
      box-shadow:
        0 10px 24px rgba(4, 12, 28, 0.45),
        inset 0 1px 0 rgba(255, 255, 255, 0.05);
      padding: 12px;
      display: grid;
      gap: 10px;
    }

    .top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .title {
      margin: 0;
      font-size: 14px;
      letter-spacing: 0.01em;
      font-weight: 800;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .hotkeys {
      font-size: 11px;
      color: var(--muted);
      border: 1px solid rgba(190, 214, 247, 0.25);
      border-radius: 999px;
      padding: 3px 8px;
      white-space: nowrap;
    }

    .dial {
      width: 188px;
      aspect-ratio: 1 / 1;
      margin: 2px auto;
      border-radius: 50%;
      position: relative;
      background: conic-gradient(var(--accent) calc(var(--pct, 0) * 1%), var(--ring-track) 0);
      box-shadow:
        0 0 0 1px rgba(195, 218, 252, 0.2) inset,
        0 10px 22px rgba(6, 18, 39, 0.42);
    }

    .dial::after {
      content: "";
      position: absolute;
      inset: 12px;
      border-radius: 50%;
      background: radial-gradient(circle at 50% 30%, #0f2443 0%, #0b1a31 72%);
      box-shadow:
        inset 0 1px 0 rgba(255, 255, 255, 0.06),
        inset 0 -8px 18px rgba(3, 10, 24, 0.46);
    }

    .digits {
      position: absolute;
      inset: 0;
      z-index: 2;
      display: grid;
      place-items: center;
      text-align: center;
    }

    .time {
      font-size: 52px;
      line-height: 1;
      letter-spacing: 0.02em;
      font-weight: 850;
      font-variant-numeric: tabular-nums;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.35);
    }

    .state {
      margin-top: 4px;
      font-size: 12px;
      color: var(--muted);
      font-weight: 650;
    }

    .panel {
      border: 1px solid rgba(186, 212, 250, 0.2);
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(31, 58, 99, 0.42), rgba(22, 43, 79, 0.4));
      padding: 9px;
      display: grid;
      gap: 8px;
    }

    .quick {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 6px;
    }

    .row {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .row.stretch > * { flex: 1; }

    .set {
      display: grid;
      grid-template-columns: auto 1fr auto 1fr auto;
      gap: 6px;
      align-items: center;
    }

    .set label {
      font-size: 11px;
      color: var(--muted);
      font-weight: 700;
      letter-spacing: 0.03em;
      text-transform: uppercase;
    }

    .set span {
      color: var(--muted);
      font-size: 14px;
      text-align: center;
      font-weight: 700;
    }

    input[type="number"] {
      width: 100%;
      height: 34px;
      border-radius: 10px;
      border: 1px solid rgba(185, 212, 249, 0.28);
      background: rgba(8, 20, 39, 0.45);
      color: var(--text);
      text-align: center;
      font-size: 15px;
      font-weight: 800;
      font-variant-numeric: tabular-nums;
      padding: 0 6px;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: rgba(78, 197, 255, 0.78);
      box-shadow: 0 0 0 2px rgba(78, 197, 255, 0.22);
    }

    .btn {
      height: 34px;
      border: 1px solid rgba(186, 212, 250, 0.24);
      border-radius: 10px;
      color: var(--text);
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.09), rgba(255, 255, 255, 0.03));
      font-size: 13px;
      font-weight: 800;
      letter-spacing: 0.01em;
      cursor: pointer;
      transition: transform 0.08s ease, border-color 0.14s ease, filter 0.16s ease;
    }

    .btn:hover { border-color: rgba(194, 221, 255, 0.45); }
    .btn:active { transform: translateY(1px); }

    .btn.primary {
      color: #072140;
      border-color: transparent;
      background: linear-gradient(180deg, var(--accent), var(--accent-2));
      box-shadow: 0 8px 18px rgba(41, 153, 255, 0.26);
    }

    .btn.warn {
      color: #3f2900;
      border-color: transparent;
      background: linear-gradient(180deg, #ffd9a2, #ffb650);
    }

    .btn.neutral {
      background: linear-gradient(180deg, rgba(192, 215, 249, 0.16), rgba(192, 215, 249, 0.08));
    }

    .dial.complete {
      animation: pulse 1s ease-in-out infinite;
      box-shadow:
        0 0 0 6px rgba(255, 110, 110, 0.18),
        0 0 38px rgba(255, 110, 110, 0.33);
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
  </style>
</head>
<body>
  <div class="timer" role="timer" aria-live="polite">
    <div class="top">
      <h1 class="title">⏱ Klas-timer</h1>
      <div class="hotkeys">spatie: start/pauze · R: reset</div>
    </div>

    <div class="dial" id="ring" aria-label="Voortgang">
      <div class="digits">
        <div class="time" id="time">05:00</div>
        <div class="state" id="state">Gepauzeerd</div>
      </div>
    </div>

    <div class="panel" aria-label="Timerbediening">
      <div class="quick">
        <button class="btn neutral" data-pres="60">+1m</button>
        <button class="btn neutral" data-pres="180">+3m</button>
        <button class="btn neutral" data-pres="300">+5m</button>
        <button class="btn neutral" data-pres="600">+10m</button>
        <button class="btn neutral" data-pres="30">+30s</button>
        <button class="btn neutral" data-pres="-30">−30s</button>
      </div>

      <div class="set">
        <label for="min">Min</label>
        <input id="min" type="number" min="0" max="999" value="5" aria-label="Minuten" />
        <span>:</span>
        <input id="sec" type="number" min="0" max="59" value="0" aria-label="Seconden" />
        <button class="btn warn" id="apply">Zet</button>
      </div>

      <div class="row stretch">
        <button class="btn primary" id="startPause">Start</button>
        <button class="btn" id="reset">Reset</button>
      </div>
    </div>
  </div>

  <script>
    let total = 300;
    let remaining = total;
    let running = false;
    let intervalId = null;

    const timeEl = document.getElementById('time');
    const stateEl = document.getElementById('state');
    const ringEl = document.getElementById('ring');
    const startBtn = document.getElementById('startPause');
    const resetBtn = document.getElementById('reset');
    const applyBtn = document.getElementById('apply');
    const minIn = document.getElementById('min');
    const secIn = document.getElementById('sec');

    const clamp = (v, lo, hi) => Math.max(lo, Math.min(hi, v));

    function fmt(seconds) {
      const m = Math.floor(seconds / 60);
      const s = seconds % 60;
      return `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
    }

    function syncInputsFrom(value) {
      const m = Math.floor(value / 60);
      const s = value % 60;
      minIn.value = String(m);
      secIn.value = String(s);
    }

    function updateDigits() {
      timeEl.textContent = fmt(remaining);
      if (remaining === 0 && !running) {
        stateEl.textContent = 'Klaar';
      } else {
        stateEl.textContent = running ? 'Bezig' : 'Gepauzeerd';
      }
    }

    function updateRing() {
      const pct = total > 0 ? (total - remaining) / total : 0;
      ringEl.style.setProperty('--pct', (pct * 100).toFixed(4));
      ringEl.classList.toggle('complete', remaining === 0);
    }

    function setFromInputs() {
      const m = clamp(parseInt(minIn.value, 10) || 0, 0, 999);
      const s = clamp(parseInt(secIn.value, 10) || 0, 0, 59);
      total = m * 60 + s;
      remaining = total;
      running = false;
      clearInterval(intervalId);
      startBtn.textContent = 'Start';
      updateDigits();
      updateRing();
    }

    function applyPreset(delta) {
      const next = clamp(remaining + delta, 0, 999 * 60 + 59);
      remaining = next;
      if (!running) total = next;
      syncInputsFrom(!running ? total : remaining);
      updateDigits();
      updateRing();
    }

    function tick() {
      if (!running) return;

      if (remaining <= 0) {
        clearInterval(intervalId);
        running = false;
        startBtn.textContent = 'Start';
        updateDigits();
        updateRing();
        if (navigator.vibrate) navigator.vibrate([180, 90, 180]);
        return;
      }

      remaining -= 1;
      updateDigits();
      updateRing();
    }

    function start() {
      if (remaining <= 0 && total > 0) remaining = total;
      if (remaining <= 0) return;

      running = true;
      startBtn.textContent = 'Pauze';
      clearInterval(intervalId);
      intervalId = setInterval(tick, 1000);
      updateDigits();
    }

    function pause() {
      running = false;
      clearInterval(intervalId);
      startBtn.textContent = 'Start';
      updateDigits();
    }

    function reset() {
      running = false;
      clearInterval(intervalId);
      remaining = total;
      startBtn.textContent = 'Start';
      syncInputsFrom(total);
      updateDigits();
      updateRing();
    }

    startBtn.addEventListener('click', () => (running ? pause() : start()));
    resetBtn.addEventListener('click', reset);
    applyBtn.addEventListener('click', setFromInputs);

    document.querySelectorAll('[data-pres]').forEach(btn => {
      btn.addEventListener('click', () => applyPreset(parseInt(btn.dataset.pres, 10)));
    });

    window.addEventListener('keydown', (e) => {
      if (e.target && (e.target.tagName === 'INPUT' || e.target.isContentEditable)) return;
      if (e.code === 'Space') {
        e.preventDefault();
        running ? pause() : start();
      }
      if (e.key.toLowerCase() === 'r') {
        e.preventDefault();
        reset();
      }
    });

    syncInputsFrom(total);
    updateDigits();
    updateRing();
  </script>
</body>
</html>
